#!/usr/bin/env bash

# Difftastic
alias gdiff="GIT_EXTERNAL_DIFF=difft git diff"
alias gshow="GIT_EXTERNAL_DIFF=difft git show"

# Russian typos
alias учше="exit"

# Alternatives to standard tools
alias vim="nvim"
alias ls="exa"
alias cat="bat"
alias gpp="gp &"

# git aliases
alias gloga="git log --all --graph --pretty=format:'%Cred%h%Creset -%C(auto)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --date=relative"
alias gfap="git fetch --all --prune"
alias gcS=gcs

alias rstatus='git log --since=8:00am --author="Alexey Korolev" | grep -Eo "Close #[0-9]+" | sed "s/Close #//"  | xargs echo "/fhm" | tr -d "\\n" | pbcopy'

# kubernetes
alias k=kubectl

# Fill Redmine hours aliases
func fillredmine() {
    local return="no"
    if [[ ! -f work.csv ]]; then
        return="yes"
        cd /Users/alphatroya/Developer/stunning-enigma
    fi

    git pull
    vim work.csv
    if [[ `git status --porcelain` ]]; then
        git commit --all -m "Update $(date -u +"%Y-%m-%d")" && git push
    else
        echo "Nothing to commit, exit"
    fi

    if [[ $return == "yes" ]]; then
        cd -
    fi
}

# measure curl timing (https://susam.in/maze/timing-with-curl.html)
alias curlt='curl -L -w "time_namelookup: %{time_namelookup}\ntime_connect: %{time_connect}\ntime_appconnect: %{time_appconnect}\ntime_pretransfer: %{time_pretransfer}\ntime_redirect: %{time_redirect}\ntime_starttransfer: %{time_starttransfer}\ntime_total: %{time_total}\n"'

# view files tree
alias lt1='exa --tree -L1'
alias lt2='exa --tree -L2'
alias lt3='exa --tree -L3'
